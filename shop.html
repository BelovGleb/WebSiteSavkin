<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ó–∞–∫–∞–∑–∞—Ç—å ‚Äî The Beatles</title>

  <style>
    :root{
      --bg: #070A10;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --accent: #FFD166;
      --accent2:#06D6A0;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 26px;
      --max: 1100px;
    }

    *{ box-sizing: border-box; }
    html{ scroll-behavior:smooth; height:100%; }

    body{
      min-height:100vh;
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.75;
      background:
        radial-gradient(900px 400px at 15% 10%, rgba(255,209,102,.14), transparent 60%),
        radial-gradient(800px 420px at 85% 25%, rgba(6,214,160,.12), transparent 60%),
        radial-gradient(900px 500px at 50% 100%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, #05070C, #070A10);
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        linear-gradient(180deg, rgba(7,10,16,.62), rgba(7,10,16,.90)),
        url("background.jpg") center/cover no-repeat fixed;
      z-index:-2;
    }

    body::after{
      content:"";
      position:fixed;
      inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity:.20;
      z-index:-1;
      pointer-events:none;
    }

    /* ====== TOPBAR ====== */
    .topbar{
      position: sticky;
      top:0;
      z-index: 50;
      backdrop-filter: blur(14px);
      background: rgba(7,10,16,.55);
      border-bottom: 1px solid var(--stroke);
    }

    .topbar-inner{
      max-width: var(--max);
      margin: 0 auto;
      padding: 14px 18px;
      display:flex;
      gap:14px;
      align-items:center;
      justify-content: space-between;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 190px;
    }

    .logo{
      width:38px; height:38px;
      border-radius: 12px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,209,102,.95), rgba(255,209,102,.2) 55%, transparent 60%),
        linear-gradient(135deg, rgba(6,214,160,.9), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    .brand-title{ display:flex; flex-direction:column; line-height:1.1; }
    .brand-title strong{ font-size: 14px; letter-spacing:.4px; }
    .brand-title span{ font-size: 12px; color: var(--muted); }

    nav.menu{
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content:flex-end;
    }

    .menu a{
      text-decoration:none;
      color: var(--muted);
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
      transition: .2s ease;
      font-size: 14px;
      white-space: nowrap;
    }

    .menu a:hover{
      color: var(--text);
      border-color: rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      transform: translateY(-1px);
    }

    .menu a.active{
      color: #101318;
      background: linear-gradient(90deg, var(--accent), #FFE199);
      border-color: rgba(255,209,102,.35);
      box-shadow: 0 12px 30px rgba(255,209,102,.18);
      cursor: default;
    }

    /* ====== PAGE ====== */
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 26px 18px 70px;
    }

    .page-title{
      margin-top: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid var(--stroke);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 22px 22px;
      position:relative;
      overflow:hidden;
    }

    .page-title::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(560px 240px at 18% 10%, rgba(6,214,160,.14), transparent 60%);
      pointer-events:none;
    }

    h1{
      margin:0;
      font-size: clamp(26px, 2.6vw, 40px);
      letter-spacing: .2px;
    }

    .lead{
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 90ch;
      font-size: 15.5px;
    }

    .layout{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap: 14px;
      align-items:start;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
    }

    .card h2{
      margin: 0 0 10px;
      font-size: 18px;
      letter-spacing:.2px;
    }

    /* ====== Controls ====== */
    .controls{
      display:grid;
      grid-template-columns: 1fr 220px 160px;
      gap: 10px;
      align-items:center;
    }

    .input, .select, .btn{
      width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 11px 12px;
      font-size: 14px;
      outline: none;
      transition: .2s ease;
    }

    .input::placeholder{ color: rgba(255,255,255,.45); }

    .input:focus, .select:focus{
      border-color: rgba(6,214,160,.35);
      box-shadow: 0 0 0 4px rgba(6,214,160,.10);
    }

    .btn{
      cursor:pointer;
      font-weight: 800;
      background: linear-gradient(90deg, var(--accent2), #8CF2D7);
      border-color: rgba(6,214,160,.30);
      color:#071014;
    }
    .btn:hover{ filter: brightness(1.02); transform: translateY(-1px); }

    .btn.ghost{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-color: rgba(255,255,255,.14);
      box-shadow: none;
    }

    .meta{
      margin-top: 10px;
      color: var(--muted);
      font-size: 13.5px;
      display:flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .tag{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.80);
      font-size: 12.5px;
    }

    .dot{
      width:8px; height:8px; border-radius: 99px;
      background: linear-gradient(90deg, var(--accent), #FFE199);
      box-shadow: 0 10px 20px rgba(255,209,102,.16);
    }

    /* ====== Products grid ====== */
    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .product{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      display:flex;
      flex-direction: column;
      min-height: 390px;
    }

    .thumb{
      height: 170px;
      background: rgba(0,0,0,.22);
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }

    .thumb img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
      filter: contrast(1.05) saturate(1.05);
      transition: transform .35s ease;
    }

    .product:hover .thumb img{ transform: scale(1.06); }

    .p-body{
      padding: 12px 12px 14px;
      display:flex;
      flex-direction: column;
      gap: 6px;
      flex:1;
    }

    .pill{
      width: fit-content;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12.5px;
      font-weight: 900;
      color:#071014;
      background: linear-gradient(90deg, var(--accent), #FFE199);
      border: 1px solid rgba(255,209,102,.35);
      white-space: nowrap;
    }

    .p-title{
      margin: 0;
      font-size: 15.5px;
      letter-spacing:.2px;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .p-desc{
      margin: 0;
      color: var(--muted);
      font-size: 13.5px;
      line-height: 1.55;
      display:-webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow:hidden;
      min-height: 64px;
    }

    .p-row{
      margin-top: auto;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding-top: 8px;
    }

    .price{
      font-weight: 900;
      color: rgba(255,255,255,.92);
      font-size: 15px;
    }

    .buy{
      border-radius: 999px;
      border: 1px solid rgba(6,214,160,.30);
      background: rgba(6,214,160,.14);
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 900;
      transition: .2s ease;
      white-space: nowrap;
    }
    .buy:hover{
      background: linear-gradient(90deg, var(--accent2), #8CF2D7);
      color:#071014;
      transform: translateY(-1px);
    }

    /* ====== Cart ====== */
    .cartBox{
      position: sticky;
      top: 86px;
    }

    .cartTop{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .cartBadge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.80);
      font-size: 12.5px;
    }

    .cartList{
      display:flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 10px;
    }

    .cartItem{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      padding: 10px;
      display:flex;
      gap: 10px;
      align-items:center;
    }

    .ciThumb{
      width: 46px;
      height: 46px;
      border-radius: 12px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      flex:0 0 auto;
    }

    .ciThumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .ciMain{
      min-width:0;
      flex:1;
      display:flex;
      flex-direction: column;
      gap: 2px;
    }

    .ciMain strong{
      font-size: 13.5px;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .ciMain span{
      color: var(--muted);
      font-size: 12.5px;
    }

    .qty{
      display:flex;
      align-items:center;
      gap: 6px;
      flex:0 0 auto;
    }

    .qbtn{
      width: 30px;
      height: 30px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 900;
      cursor:pointer;
      transition: .2s ease;
    }
    .qbtn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }

    .qval{
      min-width: 18px;
      text-align:center;
      font-weight: 900;
      font-size: 13px;
      color: rgba(255,255,255,.85);
    }

    .sum{
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      display:flex;
      flex-direction: column;
      gap: 10px;
    }

    .sumRow{
      display:flex;
      justify-content: space-between;
      gap: 10px;
      color: var(--muted);
      font-size: 13.5px;
    }

    .sumRow strong{
      color: rgba(255,255,255,.92);
      font-size: 15px;
    }

    .checkout{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* ====== Modal ====== */
    .modal{
      position: fixed;
      inset: 0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.82);
      z-index: 1000;
      padding: 18px;
    }
    .modal.open{ display:flex; }

    .modal-box{
      width: min(860px, 96vw);
      background: rgba(15,18,26,.88);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 20px;
      box-shadow: 0 22px 70px rgba(0,0,0,.65);
      overflow:hidden;
      backdrop-filter: blur(14px);
    }

    .modal-head{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 10px;
      padding: 12px 14px;
      border-bottom: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.85);
      font-size: 13.5px;
    }

    .close{
      cursor:pointer;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.9);
      width: 34px;
      height: 34px;
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      transition: .2s ease;
    }
    .close:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }

    .modal-body{
      padding: 16px;
      color: rgba(255,255,255,.9);
    }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .field{
      display:flex;
      flex-direction: column;
      gap: 6px;
    }

    .label{
      font-size: 12.5px;
      color: rgba(255,255,255,.72);
    }

    .textarea{
      grid-column: 1 / -1;
    }

    .help{
      margin-top: 10px;
      color: rgba(255,255,255,.65);
      font-size: 13px;
      line-height: 1.55;
    }

    footer.site-footer{
      margin-top: 18px;
      padding: 18px;
      color: rgba(255,255,255,.55);
      text-align:center;
      font-size: 12.5px;
    }

    @media (max-width: 980px){
      .layout{ grid-template-columns: 1fr; }
      .controls{ grid-template-columns: 1fr; }
      .grid{ grid-template-columns: 1fr; }
      .brand{ min-width: auto; }
      nav.menu{ justify-content: center; }
      .topbar-inner{ flex-direction: column; align-items: stretch; }
      .cartBox{ position: static; }
      .form{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brand-title">
          <strong>The Beatles</strong>
          <span>–ú–µ—Ä—á –∏ —Å—É–≤–µ–Ω–∏—Ä—ã</span>
        </div>
      </div>

      <nav class="menu" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="info.html">–û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
        <a href="history.html">–ò—Å—Ç–æ—Ä–∏—è</a>
        <a href="film.html">–§–∏–ª—å–º–æ–≥—Ä–∞—Ñ–∏—è</a>
        <a href="disc.html">–î–∏—Å–∫–æ–≥—Ä–∞—Ñ–∏—è</a>
        <a href="link.html">–ò—Å—Ç–æ—á–Ω–∏–∫–∏</a>
        <a href="shop.html" class="active">–ó–∞–∫–∞–∑–∞—Ç—å</a>
        <a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </nav>
    </div>
  </header>

  <main class="wrap">

    <section class="page-title">
      <h1>–ú–∞–≥–∞–∑–∏–Ω</h1>
      <p class="lead">
        –ü–æ–¥–±–æ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–∏–º–≤–æ–ª–∏–∫–æ–π The Beatles –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏.
        –≠—Ç–æ —É—á–µ–±–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è: –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç—Å—è (–±–µ–∑ –æ–ø–ª–∞—Ç—ã).
      </p>
    </section>

    <section class="layout">

      <!-- MAIN -->
      <section class="card">
        <h2>–ö–∞—Ç–∞–ª–æ–≥</h2>

        <div class="controls" aria-label="–§–∏–ª—å—Ç—Ä—ã">
          <input id="q" class="input" type="text" placeholder="–ü–æ–∏—Å–∫: —Å—É–º–∫–∞, —Ö—É–¥–∏, —Ñ—É—Ç–±–æ–ª–∫–∞..." />
          <select id="cat" class="select" aria-label="–ö–∞—Ç–µ–≥–æ—Ä–∏—è">
            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            <option value="–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</option>
            <option value="–û–¥–µ–∂–¥–∞">–û–¥–µ–∂–¥–∞</option>
            <option value="–°—É–≤–µ–Ω–∏—Ä—ã">–°—É–≤–µ–Ω–∏—Ä—ã</option>
          </select>
          <button id="reset" class="btn" type="button">–°–±—Ä–æ—Å</button>
        </div>

        <div class="meta">
          <span class="tag"><span class="dot"></span><span id="countLabel">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</span></span>
          <span class="tag">–ö–ª–∏–∫ ‚Äú–ö—É–ø–∏—Ç—å‚Äù ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</span>
        </div>

        <div id="grid" class="grid" aria-label="–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤"></div>
      </section>

      <!-- CART -->
      <aside class="card cartBox">
        <div class="cartTop">
          <h2 style="margin:0;">–ö–æ—Ä–∑–∏–Ω–∞</h2>
          <span class="cartBadge">üõí <span id="cartCount">0</span></span>
        </div>

        <div id="cartEmpty" class="tag" style="justify-content:center;">
          –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ ‚Äî –¥–æ–±–∞–≤—å —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
        </div>

        <div id="cartList" class="cartList" aria-label="–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ"></div>

        <div class="sum">
          <div class="sumRow">
            <span>–ò—Ç–æ–≥–æ</span>
            <strong id="total">0 ‚ÇΩ</strong>
          </div>
          <div class="checkout">
            <button id="clearCart" class="btn ghost" type="button">–û—á–∏—Å—Ç–∏—Ç—å</button>
            <button id="checkoutBtn" class="btn" type="button">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
          </div>
        </div>
      </aside>

    </section>

    <footer class="site-footer">
      ¬© 2025 | –£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî The Beatles ‚Ä¢ –ú–∞–≥–∞–∑–∏–Ω (–¥–µ–º–æ)
    </footer>

  </main>

  <!-- MODAL: Checkout -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞">
    <div class="modal-box">
      <div class="modal-head">
        <span>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</span>
        <div id="closeModal" class="close" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</div>
      </div>
      <div class="modal-body">
        <div class="tag" style="justify-content:space-between;">
          <span>–¢–æ–≤–∞—Ä–æ–≤: <b id="mCount">0</b></span>
          <span>–°—É–º–º–∞: <b id="mTotal">0 ‚ÇΩ</b></span>
        </div>

        <form id="orderForm" class="form">
          <div class="field">
            <div class="label">–ò–º—è</div>
            <input class="input" name="name" placeholder="–ò–≤–∞–Ω" required />
          </div>
          <div class="field">
            <div class="label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
            <input class="input" name="phone" placeholder="+7 (999) 123-45-67" required />
          </div>
          <div class="field">
            <div class="label">Email</div>
            <input class="input" type="email" name="email" placeholder="mail@example.com" required />
          </div>
          <div class="field">
            <div class="label">–ì–æ—Ä–æ–¥</div>
            <input class="input" name="city" placeholder="–ú–æ—Å–∫–≤–∞" required />
          </div>

          <div class="field textarea">
            <div class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</div>
            <textarea class="input" name="comment" rows="4" placeholder="–†–∞–∑–º–µ—Ä/—Ü–≤–µ—Ç, –ø–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ –¥–æ—Å—Ç–∞–≤–∫–µ..."></textarea>
          </div>

          <div class="field textarea">
            <button class="btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
          </div>
        </form>

        <div class="help">
          –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞. –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º—ã –ø–æ–∫–∞–∂–µ–º ‚Äú—É—Å–ø–µ—à–Ω–æ‚Äù –∏ –æ—á–∏—Å—Ç–∏–º –∫–æ—Ä–∑–∏–Ω—É.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== DATA (—Ç–≤–æ–∏ —Ç–æ–≤–∞—Ä—ã) =====
    const products = [
      { id:"bag",  cat:"–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", title:"–°—É–º–æ—á–∫–∞ –Ω–∞ –ø–ª–µ—á–æ ‚ÄúThe Beatles‚Äù", price:1500, img:"mini269.webp",
        desc:"–≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è —Å—É–º–æ—á–∫–∞ –Ω–∞ –ø–ª–µ—á–æ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º The Beatles. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫ –∏ –≤–µ—á–µ—Ä–Ω–∏—Ö –≤—ã—Ö–æ–¥–æ–≤." },
      { id:"shopper", cat:"–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", title:"–®–æ–ø–ø–µ—Ä ‚ÄúThe Beatles‚Äù", price:1200, img:"shoper69.jpg",
        desc:"–í–º–µ—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π —à–æ–ø–ø–µ—Ä —Å –ø—Ä–∏–Ω—Ç–æ–º –ª–æ–≥–æ—Ç–∏–ø–∞. –•–æ—Ä–æ—à –¥–ª—è –ø–æ–∫—É–ø–æ–∫ –∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è." },
      { id:"rucksack", cat:"–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", title:"–ñ–µ–Ω—Å–∫–∏–π —Ä—é–∫–∑–∞–∫ ‚ÄúThe Beatles‚Äù", price:2200, img:"wbag69.jpg",
        desc:"–ü—Ä–∞–∫—Ç–∏—á–Ω—ã–π —Ä—é–∫–∑–∞–∫ —Å —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º ‚Äî —É–¥–æ–±–Ω—ã–π –∞–∫—Å–µ—Å—Å—É–∞—Ä –¥–ª—è —Ñ–∞–Ω–∞—Ç–æ–≤ –≥—Ä—É–ø–ø—ã." },
      { id:"magnets", cat:"–°—É–≤–µ–Ω–∏—Ä—ã", title:"–ù–∞–±–æ—Ä –º–∞–≥–Ω–∏—Ç–∏–∫–æ–≤ ‚ÄúThe Beatles‚Äù", price:500, img:"magnit69.jpeg",
        desc:"–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –º–∞–≥–Ω–∏—Ç–æ–≤ —Å –∫—É–ª—å—Ç–æ–≤—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏. –û—Ç–ª–∏—á–Ω—ã–π –Ω–µ–±–æ–ª—å—à–æ–π –ø–æ–¥–∞—Ä–æ–∫." },
      { id:"hoodie", cat:"–û–¥–µ–∂–¥–∞", title:"–•—É–¥–∏ —É–Ω–∏—Å–µ–∫—Å —á—ë—Ä–Ω–æ–µ ‚ÄúThe Beatles‚Äù", price:2800, img:"hoodie69.webp",
        desc:"–¢—ë–ø–ª–æ–µ —Ö—É–¥–∏ —Å –ø—Ä–∏–Ω—Ç–æ–º –≥—Ä—É–ø–ø—ã. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ—Ö–ª–∞–¥–Ω—ã—Ö –¥–Ω–µ–π –∏ –≤–µ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ–≥—É–ª–æ–∫." },
      { id:"tshirt", cat:"–û–¥–µ–∂–¥–∞", title:"–§—É—Ç–±–æ–ª–∫–∞ —É–Ω–∏—Å–µ–∫—Å —á—ë—Ä–Ω–∞—è ‚ÄúThe Beatles‚Äù", price:800, img:"bt69.webp",
        desc:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —á—ë—Ä–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º. –ë–∞–∑–∞ –¥–ª—è –ª—é–±–æ–≥–æ –≥–∞—Ä–¥–µ—Ä–æ–±–∞ —Ñ–∞–Ω–∞—Ç–∞." }
    ];

    // ===== UI refs =====
    const elGrid = document.getElementById("grid");
    const elQ = document.getElementById("q");
    const elCat = document.getElementById("cat");
    const elReset = document.getElementById("reset");
    const elCount = document.getElementById("countLabel");

    const elCartCount = document.getElementById("cartCount");
    const elCartList = document.getElementById("cartList");
    const elCartEmpty = document.getElementById("cartEmpty");
    const elTotal = document.getElementById("total");
    const elClear = document.getElementById("clearCart");
    const elCheckout = document.getElementById("checkoutBtn");

    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const mCount = document.getElementById("mCount");
    const mTotal = document.getElementById("mTotal");
    const orderForm = document.getElementById("orderForm");

    // cart: {id: qty}
    const cart = {};

    function rub(n){
      return `${n.toLocaleString("ru-RU")} ‚ÇΩ`;
    }

    function norm(s){
      return (s || "").toString().toLowerCase().replace(/—ë/g,"–µ").trim();
    }

    function cartStats(){
      let count = 0, sum = 0;
      for(const id in cart){
        const qty = cart[id];
        const p = products.find(x => x.id === id);
        if(!p) continue;
        count += qty;
        sum += p.price * qty;
      }
      return { count, sum };
    }

    function renderProducts(list){
      elGrid.innerHTML = "";
      list.forEach(p => {
        const card = document.createElement("article");
        card.className = "product";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        const img = document.createElement("img");
        img.src = p.img;
        img.alt = p.title;
        thumb.appendChild(img);

        const body = document.createElement("div");
        body.className = "p-body";

        const pill = document.createElement("div");
        pill.className = "pill";
        pill.textContent = p.cat;

        const title = document.createElement("h3");
        title.className = "p-title";
        title.textContent = p.title;

        const desc = document.createElement("p");
        desc.className = "p-desc";
        desc.textContent = p.desc;

        const row = document.createElement("div");
        row.className = "p-row";

        const price = document.createElement("div");
        price.className = "price";
        price.textContent = rub(p.price);

        const buy = document.createElement("button");
        buy.className = "buy";
        buy.type = "button";
        buy.textContent = "–ö—É–ø–∏—Ç—å";
        buy.addEventListener("click", () => {
          cart[p.id] = (cart[p.id] || 0) + 1;
          renderCart();
        });

        row.appendChild(price);
        row.appendChild(buy);

        body.appendChild(pill);
        body.appendChild(title);
        body.appendChild(desc);
        body.appendChild(row);

        card.appendChild(thumb);
        card.appendChild(body);
        elGrid.appendChild(card);
      });

      elCount.textContent = `–ü–æ–∫–∞–∑–∞–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${list.length}`;
    }

    function renderCart(){
      const { count, sum } = cartStats();
      elCartCount.textContent = count;
      elTotal.textContent = rub(sum);

      elCartList.innerHTML = "";

      const items = Object.keys(cart);
      elCartEmpty.style.display = items.length ? "none" : "flex";

      items.forEach(id => {
        const p = products.find(x => x.id === id);
        const qty = cart[id];

        const item = document.createElement("div");
        item.className = "cartItem";

        const t = document.createElement("div");
        t.className = "ciThumb";
        const im = document.createElement("img");
        im.src = p.img;
        im.alt = p.title;
        t.appendChild(im);

        const main = document.createElement("div");
        main.className = "ciMain";
        const name = document.createElement("strong");
        name.textContent = p.title;
        const sub = document.createElement("span");
        sub.textContent = `${p.cat} ‚Ä¢ ${rub(p.price)}`;
        main.appendChild(name);
        main.appendChild(sub);

        const qtyBox = document.createElement("div");
        qtyBox.className = "qty";

        const minus = document.createElement("button");
        minus.className = "qbtn";
        minus.type = "button";
        minus.textContent = "‚àí";
        minus.addEventListener("click", () => {
          cart[id] = Math.max(0, (cart[id] || 0) - 1);
          if(cart[id] === 0) delete cart[id];
          renderCart();
        });

        const val = document.createElement("div");
        val.className = "qval";
        val.textContent = qty;

        const plus = document.createElement("button");
        plus.className = "qbtn";
        plus.type = "button";
        plus.textContent = "+";
        plus.addEventListener("click", () => {
          cart[id] = (cart[id] || 0) + 1;
          renderCart();
        });

        qtyBox.appendChild(minus);
        qtyBox.appendChild(val);
        qtyBox.appendChild(plus);

        item.appendChild(t);
        item.appendChild(main);
        item.appendChild(qtyBox);
        elCartList.appendChild(item);
      });

      // modal stats
      mCount.textContent = count;
      mTotal.textContent = rub(sum);

      // disable checkout if empty
      elCheckout.disabled = (count === 0);
      elCheckout.style.opacity = (count === 0) ? .55 : 1;
      elCheckout.style.cursor = (count === 0) ? "not-allowed" : "pointer";
    }

    function applyFilters(){
      const q = norm(elQ.value);
      const cat = elCat.value;

      const filtered = products.filter(p => {
        if(cat !== "all" && p.cat !== cat) return false;
        if(!q) return true;

        const hay = norm(`${p.title} ${p.desc} ${p.cat} ${p.price}`);
        return hay.includes(q);
      });

      renderProducts(filtered);
    }

    elQ.addEventListener("input", applyFilters);
    elCat.addEventListener("change", applyFilters);
    elReset.addEventListener("click", () => {
      elQ.value = "";
      elCat.value = "all";
      applyFilters();
    });

    elClear.addEventListener("click", () => {
      for(const k in cart) delete cart[k];
      renderCart();
    });

    // modal open/close
    function openModal(){
      const { count } = cartStats();
      if(count === 0) return;
      mCount.textContent = cartStats().count;
      mTotal.textContent = rub(cartStats().sum);
      modal.classList.add("open");
    }
    function close(){
      modal.classList.remove("open");
    }

    elCheckout.addEventListener("click", openModal);
    closeModal.addEventListener("click", close);
    modal.addEventListener("click", (e) => { if(e.target === modal) close(); });
    window.addEventListener("keydown", (e) => { if(e.key === "Escape") close(); });

    // submit
    orderForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const { count, sum } = cartStats();
      if(count === 0) return;

      alert(`–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!\n–¢–æ–≤–∞—Ä–æ–≤: ${count}\n–°—É–º–º–∞: ${rub(sum)}\n\n(–î–µ–º–æ-—Ä–µ–∂–∏–º: –æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è)`);

      // clear cart + close
      for(const k in cart) delete cart[k];
      renderCart();
      orderForm.reset();
      close();
    });

    // init
    renderProducts(products);
    renderCart();
  </script>
</body>
</html>

